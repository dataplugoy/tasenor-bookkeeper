{
  "rules": [
    {
      "name": "Coinbase withdrawal",
      "filter": "type == 'withdrawal'",
      "result": [
        {
          "reason": "type",
          "type": "'external'",
          "asset": "unit",
          "amount": "-amount"
        },
        {
          "reason": "type",
          "type": "isCurrency(unit) ? 'currency' : 'crypto'",
          "asset": "unit",
          "amount": "amount"
        }
      ]
    },
    {
      "name": "Coinbase deposit",
      "filter": "type == 'deposit'",
      "result": [
        {
          "reason": "type",
          "type": "'external'",
          "asset": "unit",
          "amount": "-amount"
        },
        {
          "reason": "type",
          "type": "isCurrency(unit) ? 'currency' : 'crypto'",
          "asset": "unit",
          "amount": "amount"
        }
      ]
    },
    {
      "name": "Trade",
      "filter": "type == 'match'",
      "result": [
        {
          "reason": "'trade'",
          "type": "isCurrency(unit) ? 'currency' : 'crypto'",
          "asset": "unit",
          "amount": "amount"
        }
      ]
    },
    {
      "name": "Trading fee",
      "filter": "type == 'fee'",
      "result": [
        {
          "reason": "'fee'",
          "type": "isCurrency(unit) ? 'currency' : 'crypto'",
          "asset": "unit",
          "amount": "-amount"
        }
      ]
    }
  ]
}